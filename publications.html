<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FGCU Stellar Research - Publications</title>
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="bootstrap-4.1.3-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <div id="header"></div>
    <br />
    <section id="publications">
      <div class="container mt-2 mt-xl-4 mb-4">
        <h3 class="font-weight-bold">Recent Publications</h3>
        <div class="header-separator background-secondary"></div>
        <div class="row d-flex justify-content-center">
          <div class="col-md-12">
            <div class="list-group list-group-flush">
              <ul class="list list-inline">
                <!-- Dynamically generated list items go here -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div id="footer"></div>

    <!-- JQuery is important -->
    <script src="bootstrap-4.1.3-dist/js/jquery-3.1.1.min.js"></script>
    <script>
      $("#header").load("header.html");
      $("#footer").load("footer.html");
    </script>
    <script src="bootstrap-4.1.3-dist/js/slim.min.js"></script>
    <script src="bootstrap-4.1.3-dist/js/popper.min.js"></script>
    <script src="bootstrap-4.1.3-dist/js/bootstrap.min.js"></script>
    <script>
      const list = document.querySelector(".list");

      fetch(
        "https://api.adsabs.harvard.edu/v1/search/query?" +
          new URLSearchParams({
            q: 'author:"Buzasi, Derek"',
            rows: 10,
            fl: "title, date, bibcode",
            sort: "date desc",
          }),
        {
          method: "GET",
          headers: {
            Authorization: "Bearer [token]",
          },
        }
      )
      .then((response) => {
        if (!response.ok) {
          throw Error("Error");
        }
        return response.json();
      })
      .then(data => {
        console.log(data.response.docs);
        const html = data.response.docs
          .map(docs => {
            
              var li = document.createElement("li");
              li.classList.add('d-flex');
              li.classList.add('justify-content-between');

                var outer_div = document.createElement('div');
                outer_div.classList.add('d-flex');
                outer_div.classList.add('flex-row');
                outer_div.classList.add('align-items-center');
                li.appendChild(outer_div);

                  var inner_div_1 = document.createElement('div');
                  inner_div_1.classList.add('ml-2');
                  outer_div.appendChild(inner_div_1);

                    var a = document.createElement('a');
                    a.href = 'https://ui.adsabs.harvard.edu/abs/' + docs.bibcode + '/abstract'
                    a.target = 'blank'
                    inner_div_1.appendChild(a);

                      var h6 = document.createElement('h6');
                      h6.classList.add('mb-0');
                      h6.innerText = docs.title;
                      a.appendChild(h6);

                  var br = document.createElement("br");
                  outer_div.appendChild(br);

                  var inner_div_2 = document.createElement('div');
                  inner_div_2.classList.add('d-flex');
                  inner_div_2.classList.add('flex-row');
                  inner_div_2.classList.add('mt-1');
                  inner_div_2.classList.add('text-black-50');
                  inner_div_2.classList.add('date-time');
                  outer_div.appendChild(inner_div_2);

                    var nested_div = document.createElement('div');
                    inner_div_2.appendChild(nested_div);

                      var i = document.createElement('i');
                      i.className = 'fa fa-calendar-o';
                      nested_div.appendChild(i);

                        var span = document.createElement('span');
                        span.classList.add('date');
                        span.classList.add('ml-2');
                        span.innerText = 'Published ' + docs.date;
                        i.appendChild(span);
              
              list.appendChild(li);
              return
            `<li class="d-flex justify-content-between">
                <div class="d-flex flex-row align-items-center">
                  <div class="ml-2">
                    <a
                      href="https://ui.adsabs.harvard.edu/abs/" + ${docs.bibcode} + "/abstract"
                      target="blank"
                      ><h6 class="mb-0">
                        ${doc.title}
                      </h6></a
                    >
                    <div class="d-flex flex-row mt-1 text-black-50 date-time">
                      <div>
                        <i class="fa fa-calendar-o"></i
                        ><span class="date ml-2">Published ${docs.date}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </li>`;
            
          })
          .join("");
        list.insertAdjacentHTML("afterbegin", html);
      })
      .catch((error) => {
        console.log(error);
      });
    </script>
  </body>
</html>

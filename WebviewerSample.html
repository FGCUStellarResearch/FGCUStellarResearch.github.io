<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FGCU Stellar Research - AstroDev WebViewer</title>
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="bootstrap-4.1.3-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>

  <body onload="handleSampleFiles('data/pipeout_ktwo204193529-c15_target1_ts.out');switchview()">

    <div class="alert alert-info alert-dismissible fade show text-center m-0" role="alert">
      <strong>Note: </strong>If the Webviewer is having trouble loading, make sure your browser is up-to-date!
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div id="header"></div>

    <div class="container pt-4 pb-4" id="graph-area" style="display: none">
        <div id="container" style="visibility: hidden">
          <script type="text/javascript" src="./src/submitgraph.js"></script>
          <small>Graph data display</small>
        </div>
    </div>

    <div class="container" id="analysis" style="visibility: hidden;">
      <div class="btn-group">
        <button type="button" class="btn btn-primary btn-rounded" onclick="timeseries()">Timeseries</button>
        <button type="button" class="btn btn-primary btn-rounded" onclick="detrend()">Detrend</button>
        <button type="button" class="btn btn-primary btn-rounded" onclick="calculatePhase()">Phase</button>
        <button type="button" class="btn btn-primary btn-rounded" onclick="calculateDFT()">DFT</button>
      </div>
      <div class="form-group">
        <label for="phaseFrequencyInput">Phase Frequency:</label>
        <input
          type="number"
          id="phaseFrequencyInput"
          class="form-control"
          value="0.2"
          step=".00001"
          onchange="updatePhasePeriod(this.value);calculatePhase()" />
      </div>
      <div>
        <input
          type="checkbox"
          id="useDetrend"
          onchange="updateUseDetrended()" />
        <label class="form-check-label" for="useDetrend">Use Detrended Flux</label>
      </div>
  
      <div class="form-group mb-4">
        <label for="candidateSelector">Star Candidate:</label>
        <select class="form-control" id="candidateSelector" onchange="invokeHandler()">
          <option>204193529: Eclipsing binary</option>
          <option>204328600: Rotating variable with flares</option>
          <option>211804579: Exoplanet candidate</option>
          <option>212152922: Exoplanet candidate</option>
          <option>249661654: Eclipsing binary</option>
          <option>250088244: Exoplanet candidate</option>
        </select>
      </div>
    </div>   

    <div id="footer"></div>

    <script type="text/javascript" src="./src/filehandler.js"></script>

    <!-- JQuery is important -->
    <script src="bootstrap-4.1.3-dist/js/jquery-3.1.1.min.js"></script>
    <script>
      function invokeHandler() {
        var x = document.getElementById("candidateSelector").value;
        if (x == "204193529: Eclipsing binary") {
          handleSampleFiles('data/pipeout_ktwo204193529-c15_target1_ts.out');
          switchview();
        }
        else if (x == "204328600: Rotating variable with flares") {
          handleSampleFiles('data/pipeout_ktwo204328600-c15_target1_ts.out');
          switchview();
        }
        else if (x == "211804579: Exoplanet candidate") {
          handleSampleFiles('data/pipeout_ktwo211804579-c05_target1_ts.out');
          switchview();
        }
        else if (x == "212152922: Exoplanet candidate") {
          handleSampleFiles('data/pipeout_ktwo212152922-c05_target1_ts.out');
          switchview();
        }
        else if (x == "249661654: Eclipsing binary") {
          handleSampleFiles('data/pipeout_ktwo249661654-c15_target1_ts.out');
          switchview();
        }
        else if (x == "250088244: Exoplanet candidate") {
          handleSampleFiles('data/pipeout_ktwo250088244-c15_target1_ts.out');
          switchview();
        }
      }
    </script>
    <script>
      // for future reference: this could maybe be SSI instead, but local testing doesn't seem to work - LC, 06-2019
      $("#header").load("header.html");
      $("#footer").load("footer.html");
    </script>

    <script src="bootstrap-4.1.3-dist/js/slim.min.js"></script>
    <script src="bootstrap-4.1.3-dist/js/popper.min.js"></script>
    <script src="bootstrap-4.1.3-dist/js/bootstrap.min.js"></script>

    <!-- Highcharts JS resources -->
    <script src="./lib/highcharts.js"></script>
    <script src="./lib/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/offline-exporting.js"></script>
    <script src="./lib/data.js"></script>

    <!-- Math related JS libs to handle what was previously calculated with numpy/scipy -->
    <script src="./lib/math.min.js"></script>
    <script src="./lib/numeric-1.2.6.min.js"></script>
    <script src="./lib/regression.js"></script>

    <!-- The calculations we're doing -->
    <script type="text/javascript" src="./src/analysis.js"></script>
  </body>
</html>
